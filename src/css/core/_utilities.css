/* ===========================================
   UTILITY CLASSES
   Custom utility classes EXTENDING BS5
   
   ⚠️  RULES:
   - Single-purpose utility classes only
   - No component styles
   - No BS5 duplicates (see notes below)
   - Extensions must follow BS5 patterns
   
   REMOVED (already in BS5):
   - .object-cover → use .object-fit-cover
   - .object-contain → use .object-fit-contain  
   - .gap-6/7/8 → violates BS5's 0-5 scale
   - .icon-bg-circle → use .rounded-circle
   - .overflow-x-auto → already in BS5
   - .overflow-y-auto → already in BS5
   
   MOVED TO TYPOGRAPHY:
   - .icon-bg-* → _typography.css as .bg-soft-*
   =========================================== */

/* -------------------------------------------
   SHADOW UTILITIES
   Colored shadows not available in BS5
   ------------------------------------------- */
.shadow-primary {
  box-shadow: 0 4px 14px rgba(var(--bs-primary-rgb), 0.25);
}

.shadow-primary-lg {
  box-shadow: 0 8px 25px rgba(var(--bs-primary-rgb), 0.3);
}

.shadow-secondary {
  box-shadow: 0 4px 14px rgba(var(--bs-secondary-rgb), 0.25);
}

/* -------------------------------------------
   WIDTH UTILITIES
   Content-based widths not in BS5
   ------------------------------------------- */
.w-fit { 
  width: fit-content !important; 
}

.max-w-readable { 
  max-width: 65ch !important; 
}

.max-w-content { 
  max-width: 720px !important; 
}

.max-w-prose {
  max-width: 75ch !important;
}

/* -------------------------------------------
   FONT SIZE UTILITIES
   Extra-small text utility (BS5 has fs-1 through fs-6, .small)
   ------------------------------------------- */
.text-xs {
  font-size: var(--bs-font-size-xs) !important;
}

/* -------------------------------------------
   ASPECT RATIO UTILITIES
   BS5 has .ratio but these are simpler/different
   ------------------------------------------- */
.aspect-square {
  aspect-ratio: 1 / 1;
}

.aspect-video {
  aspect-ratio: 16 / 9;
}

.aspect-4-3 {
  aspect-ratio: 4 / 3;
}

.aspect-3-2 {
  aspect-ratio: 3 / 2;
}

/* -------------------------------------------
   TRANSITION UTILITIES
   Standardized transition speeds
   ------------------------------------------- */
.transition-none {
  transition: none !important;
}

.transition-fast {
  transition: all 0.15s ease !important;
}

.transition-base {
  transition: all 0.3s ease !important;
}

.transition-slow {
  transition: all 0.5s ease !important;
}

/* Property-specific transitions */
.transition-transform {
  transition: transform 0.3s ease !important;
}

.transition-opacity {
  transition: opacity 0.3s ease !important;
}

.transition-shadow {
  transition: box-shadow 0.3s ease !important;
}

/* -------------------------------------------
   HOVER UTILITIES
   Interactive transform effects
   ------------------------------------------- */
.hover-lift {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-lift:hover {
  transform: translateY(-4px);
}

.hover-scale {
  transition: transform 0.3s ease;
}

.hover-scale:hover {
  transform: scale(1.02);
}

.hover-shadow {
  transition: box-shadow 0.3s ease;
}

.hover-shadow:hover {
  box-shadow: var(--bs-shadow-md);
}

/* Combined effects */
.hover-lift-shadow {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-lift-shadow:hover {
  transform: translateY(-4px);
  box-shadow: var(--bs-shadow-lg);
}

/* Background hover effects */
.hover-bg-light {
  transition: background-color 0.2s ease;
}

.hover-bg-light:hover {
  background-color: var(--bs-gray-100);
}

.hover-bg-dark {
  transition: background-color 0.2s ease;
}

.hover-bg-dark:hover {
  background-color: rgba(var(--bs-dark-rgb), 0.05);
}

/* -------------------------------------------
   Z-INDEX UTILITIES
   Semantic z-index layers
   ------------------------------------------- */
.z-0 { z-index: 0; }
.z-10 { z-index: 10; }
.z-20 { z-index: 20; }
.z-30 { z-index: 30; }
.z-40 { z-index: 40; }
.z-50 { z-index: 50; }

/* Semantic aliases */
.z-below { z-index: -1; }
.z-base { z-index: 0; }
.z-dropdown { z-index: 1000; }
.z-sticky { z-index: 1020; }
.z-fixed { z-index: 1030; }
.z-modal-backdrop { z-index: 1040; }
.z-modal { z-index: 1050; }
.z-popover { z-index: 1060; }
.z-tooltip { z-index: 1070; }

/* -------------------------------------------
   BACKDROP UTILITIES
   Glass/blur effects
   ------------------------------------------- */
.backdrop-blur {
  backdrop-filter: blur(var(--bs-glass-blur));
  -webkit-backdrop-filter: blur(var(--bs-glass-blur));
}

.backdrop-blur-sm {
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.backdrop-blur-lg {
  backdrop-filter: blur(var(--bs-glass-blur-strong));
  -webkit-backdrop-filter: blur(var(--bs-glass-blur-strong));
}

.backdrop-blur-none {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* -------------------------------------------
   BORDER UTILITIES
   Custom border styles
   ------------------------------------------- */
.border-glass {
  border: 1px solid var(--bs-glass-border);
}

.border-subtle {
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.border-gradient {
  border: 2px solid transparent;
  background: 
    linear-gradient(white, white) padding-box,
    linear-gradient(135deg, var(--bs-primary), var(--bs-secondary)) border-box;
}

/* -------------------------------------------
   CURSOR UTILITIES
   Pointer states (not in BS5)
   ------------------------------------------- */
.cursor-pointer {
  cursor: pointer;
}

.cursor-default {
  cursor: default;
}

.cursor-grab {
  cursor: grab;
}

.cursor-grabbing {
  cursor: grabbing;
}

.cursor-not-allowed {
  cursor: not-allowed;
}

/* -------------------------------------------
   SELECTION UTILITIES
   User selection control
   ------------------------------------------- */
.select-none {
  user-select: none;
}

.select-text {
  user-select: text;
}

.select-all {
  user-select: all;
}

/* -------------------------------------------
   SCROLL UTILITIES
   Scroll behavior
   ------------------------------------------- */
.scroll-smooth {
  scroll-behavior: smooth;
}

.scroll-snap-x {
  scroll-snap-type: x mandatory;
}

.scroll-snap-y {
  scroll-snap-type: y mandatory;
}

.scroll-snap-start {
  scroll-snap-align: start;
}

.scroll-snap-center {
  scroll-snap-align: center;
}

/* -------------------------------------------
   POINTER EVENTS
   ------------------------------------------- */
.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto;
}

/* -------------------------------------------
   AVATAR SYSTEM
   Circular profile images with fallback
   ------------------------------------------- */
.avatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden;
  background: var(--bs-gray-200);
  flex-shrink: 0;
}

.avatar-sm {
  width: var(--bs-avatar-sm);
  height: var(--bs-avatar-sm);
  font-size: var(--bs-font-size-xs);
}

.avatar-md {
  width: var(--bs-avatar-md);
  height: var(--bs-avatar-md);
  font-size: var(--bs-font-size-sm);
}

.avatar-lg {
  width: var(--bs-avatar-lg);
  height: var(--bs-avatar-lg);
  font-size: 1rem;
}

.avatar-xl {
  width: var(--bs-avatar-xl);
  height: var(--bs-avatar-xl);
  font-size: var(--bs-font-size-lg);
}

.avatar-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatar-initials {
  font-weight: 600;
  color: var(--bs-gray-600);
  text-transform: uppercase;
  line-height: 1;
}

/* Avatar colors */
.avatar-primary {
  background: rgba(var(--bs-primary-rgb), 0.15);
}
.avatar-primary .avatar-initials {
  color: var(--bs-primary);
}

.avatar-success {
  background: rgba(var(--bs-success-rgb), 0.15);
}
.avatar-success .avatar-initials {
  color: var(--bs-success);
}

.avatar-warning {
  background: rgba(var(--bs-warning-rgb), 0.15);
}
.avatar-warning .avatar-initials {
  color: var(--bs-warning);
}

.avatar-info {
  background: rgba(var(--bs-info-rgb), 0.15);
}
.avatar-info .avatar-initials {
  color: var(--bs-info);
}

/* -------------------------------------------
   RATING STARS
   Star-based rating display
   ------------------------------------------- */
.rating-stars {
  display: inline-flex;
  gap: 0.125rem;
  color: var(--bs-rating-color);
}

.rating-stars .bi {
  font-size: 1rem;
}

.rating-stars-sm .bi {
  font-size: var(--bs-font-size-sm);
}

.rating-stars-lg .bi {
  font-size: 1.25rem;
}

.rating-stars .bi-star {
  color: var(--bs-rating-empty-color);
}

/* -------------------------------------------
   META ROW
   Icon + text metadata pairs
   ------------------------------------------- */
.meta-row {
  display: flex;
  gap: var(--bs-space-3);
  flex-wrap: wrap;
  font-size: var(--bs-font-size-sm);
  color: var(--bs-gray-500);
}

.meta-item {
  display: inline-flex;
  align-items: center;
  gap: var(--bs-space-1);
}

.meta-item i {
  color: var(--bs-primary);
  opacity: 0.7;
  font-size: 0.875em;
}

/* Dark variant */
.meta-row-dark {
  color: var(--bs-gray-400);
}

.meta-row-dark .meta-item i {
  color: var(--bs-blue-light);
}

/* -------------------------------------------
   ASPECT RATIO CONTAINERS
   Fixed aspect ratio wrappers
   ------------------------------------------- */
.aspect-container {
  position: relative;
  overflow: hidden;
}

.aspect-container > img,
.aspect-container > video,
.aspect-container > iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* -------------------------------------------
   OVERLAY UTILITIES
   Decorative ::before gradient overlays.
   Apply to any positioned container — hero,
   section, banner, card-group, etc.

   Two mechanisms work together:
   1. Sets --overlay-bg custom property, which
      .hero::before reads via var(). Lets you
      override the hero overlay with a class.
   2. Defines its own ::before for standalone
      use on non-.hero elements.

   Usage:
     <section class="hero overlay-secondary">  ← on hero
     <section class="py-5 overlay-teal">       ← standalone

   Brand overrides: set --overlay-bg directly
     .my-brand .hero { --overlay-bg: ...; }
   ------------------------------------------- */

/* Base: establish stacking context for standalone use */
.overlay-primary,
.overlay-secondary,
.overlay-teal,
.overlay-dark,
.overlay-warm,
.overlay-light,
.overlay-warning,
.overlay-danger,
.overlay-info,
.overlay-success {
  position: relative;
  overflow: hidden;
}

/* ::before boilerplate for standalone (non-hero) use */
.overlay-primary::before,
.overlay-secondary::before,
.overlay-teal::before,
.overlay-dark::before,
.overlay-warm::before,
.overlay-light::before,
.overlay-warning::before,
.overlay-danger::before,
.overlay-info::before,
.overlay-success::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

/* --- Variants --- */

/* Subtle primary + teal radial spots (matches default hero look) */
.overlay-primary {
  --overlay-bg:
    radial-gradient(circle at 15% 25%, rgba(var(--bs-primary-rgb), 0.12) 0%, transparent 50%),
    radial-gradient(circle at 85% 75%, rgba(var(--bs-teal-rgb), 0.08) 0%, transparent 50%);
}
.overlay-primary::before {
  background: var(--overlay-bg);
}

/* Dark directional base + secondary + teal accents (from user example) */
.overlay-secondary {
  --overlay-bg:
    linear-gradient(135deg, rgba(var(--bs-dark-rgb), 0.88) 0%, rgba(var(--bs-dark-rgb), 0.78) 50%, rgba(var(--bs-dark-rgb), 0.88) 100%),
    radial-gradient(ellipse at 70% 20%, rgba(var(--bs-secondary-rgb), 0.12) 0%, transparent 60%),
    radial-gradient(ellipse at 30% 80%, rgba(var(--bs-teal-rgb), 0.08) 0%, transparent 60%);
}
.overlay-secondary::before {
  background: var(--overlay-bg);
}

/* Teal + primary accent spots */
.overlay-teal {
  --overlay-bg:
    radial-gradient(ellipse at 20% 30%, rgba(var(--bs-teal-rgb), 0.18) 0%, transparent 55%),
    radial-gradient(ellipse at 80% 70%, rgba(var(--bs-primary-rgb), 0.10) 0%, transparent 55%);
}
.overlay-teal::before {
  background: var(--overlay-bg);
}

/* Pure dark directional vignette, no color tint */
.overlay-dark {
  --overlay-bg:
    linear-gradient(135deg, rgba(var(--bs-dark-rgb), 0.85) 0%, rgba(var(--bs-dark-rgb), 0.70) 50%, rgba(var(--bs-dark-rgb), 0.85) 100%);
}
.overlay-dark::before {
  background: var(--overlay-bg);
}

/* Warm amber + secondary (orange) accent spots */
.overlay-warm {
  --overlay-bg:
    radial-gradient(ellipse at 30% 20%, rgba(var(--bs-warning-rgb), 0.15) 0%, transparent 55%),
    radial-gradient(ellipse at 70% 80%, rgba(var(--bs-secondary-rgb), 0.10) 0%, transparent 55%);
}
.overlay-warm::before {
  background: var(--overlay-bg);
}

/* White/light frosted radial tint — soft diffused bloom from center + corners */
.overlay-light {
  --overlay-bg:
    radial-gradient(ellipse at 50% 50%, rgba(var(--bs-white-rgb), 0.18) 0%, transparent 65%),
    radial-gradient(ellipse at 10% 10%, rgba(var(--bs-white-rgb), 0.10) 0%, transparent 45%),
    radial-gradient(ellipse at 90% 90%, rgba(var(--bs-primary-rgb), 0.05) 0%, transparent 45%);
}
.overlay-light::before {
  background: var(--overlay-bg);
}

/* Amber warning radial — bold centre bloom + top-right echo */
.overlay-warning {
  --overlay-bg:
    radial-gradient(ellipse at 50% 60%, rgba(var(--bs-warning-rgb), 0.20) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 15%, rgba(var(--bs-warning-rgb), 0.10) 0%, transparent 40%);
}
.overlay-warning::before {
  background: var(--overlay-bg);
}

/* Red danger radial — centred bloom + subtle bottom-left echo */
.overlay-danger {
  --overlay-bg:
    radial-gradient(ellipse at 50% 50%, rgba(var(--bs-danger-rgb), 0.18) 0%, transparent 60%),
    radial-gradient(ellipse at 20% 85%, rgba(var(--bs-danger-rgb), 0.09) 0%, transparent 45%);
}
.overlay-danger::before {
  background: var(--overlay-bg);
}

/* Cyan info radial — top-left origin + bottom-right echo */
.overlay-info {
  --overlay-bg:
    radial-gradient(ellipse at 20% 25%, rgba(var(--bs-info-rgb), 0.18) 0%, transparent 55%),
    radial-gradient(ellipse at 80% 75%, rgba(var(--bs-info-rgb), 0.10) 0%, transparent 50%);
}
.overlay-info::before {
  background: var(--overlay-bg);
}

/* Green success radial — bottom-left origin + top-right echo */
.overlay-success {
  --overlay-bg:
    radial-gradient(ellipse at 25% 75%, rgba(var(--bs-success-rgb), 0.18) 0%, transparent 55%),
    radial-gradient(ellipse at 75% 25%, rgba(var(--bs-success-rgb), 0.10) 0%, transparent 50%);
}
.overlay-success::before {
  background: var(--overlay-bg);
}

/* Remove overlay — suppresses any inherited ::before */
.overlay-none::before {
  display: none !important;
}
